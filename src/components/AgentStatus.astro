---
// AI Agent Status Indicators component
// Shows committee members with online/offline/working states
---

interface Agent {
  name: string;
  wing: string;
  status: 'online' | 'working' | 'offline';
}

const { agents } = Astro.props;

function getStatusColor(status: string): string {
  if (status === 'online') return 'bg-green-400';
  if (status === 'working') return 'bg-yellow-400';
  return 'bg-gray-400';
}

function getStatusTextColor(status: string): string {
  if (status === 'online') return 'text-green-400';
  if (status === 'working') return 'text-yellow-400';
  return 'text-gray-400';
}

function getStatusIndicator(status: string): string {
  if (status === 'online') return '● Online';
  if (status === 'working') return '● Working';
  return '● Offline';
}
---

<div class="bg-white section">
  <section class="container">
    <h2 class="text-2xl font-bold mb-2">AI Committee Status</h2>
    <p class="text-gray-600">Real-time status of committee wings</p>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
      {agents.map((agent, index) => (
        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
          <div class="flex items-center gap-3 mb-3">
            <div class={`w-3 h-3 rounded-full ${getStatusColor(agent.status)}`}>
              {agent.status === 'online' && (
                <div class="animate-pulse w-full h-full rounded-full bg-green-400"></div>
              )}
            </div>
            <div>
              <div class="font-semibold">{agent.name}</div>
              <div class="text-sm text-gray-500">{agent.wing}</div>
            </div>
          </div>
          <div class={`text-xs font-medium ${getStatusTextColor(agent.status)}`}>
            {getStatusIndicator(agent.status)}
          </div>
        </div>
      ))}
    </div>
  </section>
</div>

<style>
  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-pulse {
      animation: none !important;
    }
  }
</style>
